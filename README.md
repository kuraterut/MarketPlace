# Marketplace Microservice Application

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ –Ω–∞ Java 17 –∏ Spring Boot —Å —Ç—Ä–µ—Ö—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

## üìå –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

- **API Gateway** - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- **Auth Service** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –≤—ã–¥–∞—á–∞ JWT
- **Eureka Server** - Service Discovery –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **Payment Service** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **Order Service** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- **Product Service** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- **JwtSecurityLib** - –æ–±—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JWT

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫**: Java 17
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Spring Boot 3
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**:
    - PostgreSQL - –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    - KeyDB - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π**: Apache Kafka
- **Service Discovery**: Netflix Eureka
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger (OpenAPI 3.0)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: JUnit, Mockito, Testcontainers
- **–°–±–æ—Ä–∫–∞**: Maven
- **CI/CD**: Jenkins
- **Deploy**: Kubernetes, Helm

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –¢—Ä–µ—Ö—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å use-case'–∞–º–∏:
    1. **Presentation Layer** (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
    2. **Business Logic Layer** (use-cases, —Å–µ—Ä–≤–∏—Å—ã)
    3. **Data Access Layer** (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Kafka
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ KeyDB
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ REST –∏ GRPC
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Docker Compose
1. –ù–µ–æ–±—Ö–æ–¥–∏–º Docker
2. –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–ø—É—Å–∫–∞–µ–º:
```docker-compose up --build```
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ localhost:8080 (ApiGateway)

### Kubernetes (Minikube + Helm)
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Minikube (–ò–ª–∏ –∞–Ω–∞–ª–æ–≥–∏ –¥–ª—è Kubernetes) –∏ Helm
2. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—à–∏—Ç—å –Ω–∞ —Å–≤–æ–π Docker Hub –≤—Å–µ –æ–±—Ä–∞–∑—ã, –∞ –≤ marketplace-app/values.yaml —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π –Ω–∏–∫ (global.docker.nickname)
3. –ó–∞–ø—É—Å–∫–∞–µ–º –∫–ª–∞—Å—Ç–µ—Ä Kubernetes, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å –ø–æ–º–æ—â—å—é minikube: ```minikube start --driver=docker --memory=4096 --cpus=2```
4. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —á–∞—Ä—Ç–æ–≤: ```cd marketplace-app``` 
5. –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–∞—Ä—Ç–æ–≤: ```helm dependency update```
6. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º Helm Chart —Å –Ω–∞—à–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—É–±—á–∞—Ä—Ç–æ–≤: ```helm upgrade --install marketplace-app ./ -f values.yaml```


## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

- –î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:
    1. **SwaggerUI:** http://<IP:PORT>/swagger-ui.html
    2. **OpenAPI JSON** http://<IP:PORT>/v3/api-docs

## ÔøΩ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```mvn test```

- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
```mvn test -pl <service-name>```

## ü§ù –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è (REST)
  - –ß–µ—Ä–µ–∑ API Gateway —Å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π 
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç FeignClient –¥–ª—è service-to-service –≤—ã–∑–æ–≤–æ–≤

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è(Kafka)


## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- JWT (HS256)
- –†–æ–ª–∏: SELLER, ADMIN, CUSTOMER
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–ª–∞–Ω—Å —Å—á–µ—Ç–∞)
- CORS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ API Gateway
     