apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "order-service.fullname" . }}-config
  labels:
    {{- include "order-service.labels" . | nindent 4 }}
data:
  SPRING_PROFILES_ACTIVE: "{{ .Values.global.springProfile }}"
  JWT_SECRET: "{{ .Values.global.jwt.secret }}"
  SPRING_DATASOURCE_URL: >-
    jdbc:postgresql://{{ include "order-service.fullname" . }}-postgres:{{ .Values.postgresql.port }}/{{ .Values.postgresql.database }}
  SPRING_DATASOURCE_USERNAME: "{{ .Values.postgresql.username }}"
  SPRING_DATASOURCE_PASSWORD: "{{ .Values.postgresql.password }}"
  SPRING_DATA_REDIS_HOST: {{ include "order-service.fullname" . }}-keydb
  SPRING_DATA_REDIS_PORT: "{{ .Values.keydb.port }}"
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "{{ include "order-service.kafkaBootstrap" . }}"
  SERVER_PORT: "{{ .Values.service.port}}"
  KAFKA_CONSUMER_GROUP_ID: "{{ .Values.kafka.consumerGroupId}}"
  EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: "{{ .Values.global.eureka.serviceUrl}}"